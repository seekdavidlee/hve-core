{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/microsoft/hve-core/schemas/agent-frontmatter.schema.json",
  "title": "Agent File Frontmatter Schema",
  "description": "Frontmatter schema for .agent.md files per VS Code custom agent specification",
  "type": "object",
  "required": [
    "description"
  ],
  "properties": {
    "description": {
      "type": "string",
      "minLength": 1,
      "description": "A brief description of the custom agent, shown as placeholder text in the chat input field"
    },
    "name": {
      "type": "string",
      "description": "The name of the custom agent. If not specified, the file name is used"
    },
    "argument-hint": {
      "type": "string",
      "description": "Optional hint text shown in the chat input field to guide users on how to interact with the custom agent"
    },
    "tools": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "A list of tool or tool set names available for this custom agent. Can include built-in tools, tool sets, MCP tools, or tools contributed by extensions"
    },
    "agents": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "A list of agent names available as subagents. Use * to allow all agents, or an empty array [] to prevent subagent use"
    },
    "model": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      ],
      "description": "The AI model to use. Specify a single model name or a prioritized list of models. If not specified, the currently selected model is used"
    },
    "user-invocable": {
      "type": "boolean",
      "description": "Controls whether the agent appears in the agents dropdown (default is true). Set to false for subagent-only agents"
    },
    "disable-model-invocation": {
      "type": "boolean",
      "description": "Prevents the agent from being invoked as a subagent by other agents (default is false)"
    },
    "infer": {
      "type": "boolean",
      "description": "Deprecated. Use user-invocable and disable-model-invocation instead"
    },
    "target": {
      "type": "string",
      "enum": [
        "vscode",
        "github-copilot"
      ],
      "description": "The target environment or context for the custom agent"
    },
    "mcp-servers": {
      "type": "array",
      "items": {
        "type": "object"
      },
      "description": "Optional list of Model Context Protocol (MCP) server config json to use with custom agents in GitHub Copilot"
    },
    "handoffs": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "label",
          "agent"
        ],
        "properties": {
          "label": {
            "type": "string",
            "description": "The display text shown on the handoff button"
          },
          "agent": {
            "type": "string",
            "description": "The target agent identifier to switch to"
          },
          "prompt": {
            "type": "string",
            "description": "The prompt text to send to the target agent"
          },
          "send": {
            "type": "boolean",
            "description": "Optional boolean flag to auto-submit the prompt (default is false)"
          },
          "model": {
            "type": "string",
            "description": "Optional language model override for handoff execution"
          }
        }
      },
      "description": "Optional list of suggested next actions or prompts to transition between custom agents"
    }
  },
  "additionalProperties": true
}